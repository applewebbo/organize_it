{% load trip_tags %}
<div class="py-4 px-6 w-full bg-white rounded-lg border border-gray-200 shadow">
    <div class="flex items-center">
        <h2 class="text-lg font-medium sm:text-xl grow">Day {{ day.number }}</h2>
        <button class="btn btn-sm me-2 sm:btn-md" disabled="disabled">
            {% heroicon_mini "pencil-square" class="size-5" %}
        </button>
        <button class="btn btn-sm me-2 sm:btn-md" disabled="disabled">{% heroicon_mini "map" class="size-5" %}</button>
        <c-dropdown />
    </div>
    <div id="stay-info" class="mt-4">
        <ul>
            {% if day.stay %}
                <li class="flex items-center italic">
                    {{ day.stay.name }}
                    {% if day|is_first_day_of_stay and day.stay.check_in %} {{ day.stay.check_in|time:"H:i" }} {% heroicon_mini 'arrow-right-end-on-rectangle' class="size-4 ms-1" %}{% endif %}
                    {% with next_day=day|next_day %}
                        {% if day.stay.check_out and day|has_different_stay:next_day %}
                            - Check-out at {{ day.stay.check_out|time:"H:i" }}
                        {% endif %}
                    {% endwith %}
                </li>
                {% with next_day=day|next_day %}
                    {% if next_day and next_day.stay and day|has_different_stay:next_day and next_day.stay.check_in %}
                        <li class="italic">Next Day Check-in at {{ next_day.stay.name }} ({{ next_day.stay.check_in|time:"H:i" }})</li>
                    {% endif %}
                {% endwith %}
            {% endif %}
        </ul>
    </div>
    {% if day.events.all %}<div class="divider"></div>{% endif %}
    <ul>
        {% for event in day.events.all %}<li>{{ event.name }} ({{ event.get_category_display }})</li>{% endfor %}
    </ul>
</div>
